<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>Prevendo Resultados no Futebol - Parte 1 | ACE Laboratory</title> <meta name="author" content="ACE Laboratory"> <meta name="description" content="Marrying academic rigor with practical applications to benefit sports "> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.css"> <link rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?19f3075a2d19613090fe9e16b564e1fe" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%9B%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://ac3lab.github.io/blog/2000/post_pitagorica_1_pt/"> <script async src="https://www.googletagmanager.com/gtag/js?id=G-TN7TBYJLBY"></script> <script>function gtag(){window.dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-TN7TBYJLBY");</script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span><img src="/assets/img/ACE_Logo.jpg" width="40" height="40" class="circular-cut">  </span><span class="font-weight-bold">ACE </span>Laboratory</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">About</a> </li> <li class="nav-item "> <a class="nav-link" href="/blog/">Blog</a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">Publications</a> </li> <li class="nav-item "> <a class="nav-link" href="/profile/">Research Team</a> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5"> <div class="post"> <header class="post-header"> <h1 class="post-title">Prevendo Resultados no Futebol - Parte 1</h1> <p class="post-meta">January 1, 2000• Ace Laboratory Football Team - Lucas Calmon, Pedro Carvalho</p> <p class="post-tags"> <a href="/blog/2000"> <i class="fa-solid fa-calendar fa-sm"></i> 2000 </a>   ·   <a href="/blog/tag/football"> <i class="fa-solid fa-hashtag fa-sm"></i> Football;</a>   <a href="/blog/tag/analysis"> <i class="fa-solid fa-hashtag fa-sm"></i> Analysis</a>     ·   <a href="/blog/category/football"> <i class="fa-solid fa-tag fa-sm"></i> Football;</a>   <a href="/blog/category/analysis"> <i class="fa-solid fa-tag fa-sm"></i> Analysis</a>   </p> </header> <article class="post-content"> <div id="markdown-content"> <hr> <h2> <b> Inttrodução </b> </h2> <div style="text-align: justify"> Nessa série de posts nós vamos estudar alguns métodos para tentar prever a porcentagem de vitória dos clubes de futebol. Neste primeiro post iremos falar sobre duas estatísticas: a porcentagem de vitória e uma variação dela chamada de expectativa pitagórica. Serão utilizados dados das últimas temporadas de algumas das grandes ligas europeias (23-24) e do Brasileirão (24), extraídos no site FBREF. <br><br> <h3> <b> O que é a Expectativa Pitagórica </b> </h3> A expectativa pitagórica é uma fórmula analítica utilizada inicialmente no beisebol. Ela foi criada pelo Bill James, um famoso estatístico pioneiro na área de dados esportivos que criou dúzias de livros com o objetivo de estudar o beisebol por meio de dados estatísticos, tentando determinar o porquê times ganham e perdem. Enfim, essa expectativa pitagórica tem o objetivo de estimar a porcentagem de jogos que um time deveria ter vencido baseado no número de corridas que eles completaram e concederam. No cenário do futebol, o utilizado seria gols feitos e gols concedidos. <br><br> <div style="width: 100%; margin: 0 auto; text-align: center;"> <figure> <picture> <img src="/assets/img/Posts_Images/2025-02-12-post_pitagorica_1/image1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <center>O nome da estatística se dá a semelhança da fórmula ao teorema de pitágoras. <br><br> </center> Comparar a porcentagem de vitória de um time com a expectativa pitagórica pode ser usado para avaliar quais times estão performando acima do esperado e quais estão piores do que se espera deles. <br><br> <h3> <b> A Pesquisa</b> </h3> Os dados utilizados consistem em uma tabela com todos os resultados de partidas da temporada de cada liga, coletados no FBREF (<a href="https://fbref.com/pt/comps/24/cronograma/Serie-A-Resultados-e-Calendarios" rel="external nofollow noopener" target="_blank">). <br><br> <h3> <b> Preparação dos dados e definição das porcentagens </b> </h3> Após extração dos dados e uma limpeza básica da tabela, o resultado é um DataFrame no formato abaixo. Uma temporada tem 380 jogos, e para o cálculo da porcentagem de vitória e da expectativa pitagórica, precisaremos das seguintes informações: o resultado da partida definirá a porcentagem de vitória do time e os gols marcados e concedidos irão definir a expectativa pitagórica. <br><br> <div style="width: 100%; margin: 0 auto; text-align: center;"> <figure> <picture> <img src="/assets/img/Posts_Images/2025-02-12-post_pitagorica_1/image2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <center>Esse é o formato dos dados extraídos do FBREF. <br><br> </center> Separamos os gols de cada equipe e definimos qual time foi o vencedor de cada partida do campeonato. Assim, podemos calcular a porcentagem de vitória -vitória vale 1, empate vale 0.5 e derrota vale nada-, e a soma desses valores é dividida pelo número de partidas jogadas. (</a><a href="https://en.wikipedia.org/wiki/Winning_percentage" rel="external nofollow noopener" target="_blank">). <br><br> Depois de ajustar a tabela e calcular a porcentagem de vitória das equipes, separamos os dados entre Primeiro Turno e Segundo Turno, ou seja, antes e depois da rodada 20. A tabela do Primeiro Turno do campeonato fica mais ou menos assim: <br><br> <div style="width: 100%; margin: 0 auto; text-align: center;"> <figure> <picture> <img src="/assets/img/Posts_Images/2025-02-12-post_pitagorica_1/image3.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <center> G: número de partidas jogadas; W: valor de cada partida, estimado para o cálculo da porcentagem de vitórias; GF: gols feitos; GA: gols concedidos; wpc: porcentagem de vitória <br><br> </center> Para finalizar nossa tabela, calculamos a expectativa pitagórica e juntamos as tabelas do Primeiro e do Segundo Turno de acordo com o time. <br><br> <div style="width: 100%; margin: 0 auto; text-align: center;"> <figure> <picture> <img src="/assets/img/Posts_Images/2025-02-12-post_pitagorica_1/image4.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <center> Valores com <b>x</b> são relacionados ao primeiro turno, e os valores com <b>y</b> são do segundo turno</center> Código do cálculo de wpc e pyth: <br> <br> <figure class="highlight"><pre><code class="language-python" data-lang="python"><table class="rouge-table"><tbody><tr>
<td class="gutter gl"><pre class="lineno">1
2
</pre></td> <td class="code"><pre><span class="n">PrimeiroTurno</span><span class="p">[</span><span class="sh">'</span><span class="s">win_percentage</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">PrimeiroTurno</span><span class="p">[</span><span class="sh">'</span><span class="s">W</span><span class="sh">'</span><span class="p">]</span> <span class="o">/</span> <span class="n">PrimeiroTurno</span><span class="p">[</span><span class="sh">'</span><span class="s">G</span><span class="sh">'</span><span class="p">]</span>  <span class="c1"># percentual de vitórias - (Vitórias) / (Jogos Jogados)  
</span><span class="n">PrimeiroTurno</span><span class="p">[</span><span class="sh">'</span><span class="s">pythagorean</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">PrimeiroTurno</span><span class="p">[</span><span class="sh">'</span><span class="s">GF</span><span class="sh">'</span><span class="p">]</span><span class="o">**</span><span class="mi">2</span> <span class="o">/</span> <span class="p">(</span><span class="n">PrimeiroTurno</span><span class="p">[</span><span class="sh">'</span><span class="s">GF</span><span class="sh">'</span><span class="p">]</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">PrimeiroTurno</span><span class="p">[</span><span class="sh">'</span><span class="s">GA</span><span class="sh">'</span><span class="p">]</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>  <span class="c1"># expectativa pitagórica - (Gols Pró)^2 / ((Gols Pró)^2 + (Gols Contra)^2)  </span>
</pre></td> </tr></tbody></table></code></pre></figure> <br><br> <h3> <b> Falando dos gráficos de regressão e da correlação </b> </h3> Como podemos ver na imagem abaixo, a expectativa pitagórica no primeiro turno da Premier League é bastante relacionada com a porcentagem de vitória, como esperado. <br><br> <div style="width: 100%; margin: 0 auto; text-align: center;"> <figure> <picture> <img src="/assets/img/Posts_Images/2025-02-12-post_pitagorica_1/image5.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <center> Relação entre a <b>pythagorean_x</b> e a <b>win_percentage_x</b> no Primeiro Turno. A linha no gráfico é uma regressão linear ajustada aos dados, que representa a relação entre as duas variáveis. <br><br> </center> Mas o que nós queremos saber é: qual das duas estatísticas têm uma relação maior com a porcentagem de vitória da equipe ao final do campeonato? Para analisar isso, podemos gerar uma tabela de correlação entre essas estatísticas no Primeiro Turno do campeonato e no Segundo Turno. <br><br> <div style="width: 100%; margin: 0 auto; text-align: center;"> <figure> <picture> <img src="/assets/img/Posts_Images/2025-02-12-post_pitagorica_1/image6.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <center> Tabela de Correlação da Premier League. <br><br> </center> Como podemos ver pelos valores marcados na imagem, existe uma correlação maior entre <b>pythagorean_x</b> e <b>win_percentage_y</b> (0.80) do que entre <b>win_percentage_x</b> e <b>win_percentage_y</b> (0.75). Apesar de ser uma diferença pequena, isso mostra que a expectativa pitagórica tem um poder preditivo melhor que a porcentagem de vitória. Esse é o resultado da Premier League. Qual seria o resultado em outras ligas? <br><br> <h4> <b> Bundesliga </b> </h4> <div style="width: 100%; margin: 0 auto; text-align: center;"> <figure> <picture> <img src="/assets/img/Posts_Images/2025-02-12-post_pitagorica_1/image7.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <center> Tabela de Correlação da Bundesliga. <br><br> </center> <h4> <b> La Liga </b> </h4> <div style="width: 100%; margin: 0 auto; text-align: center;"> <figure> <picture> <img src="/assets/img/Posts_Images/2025-02-12-post_pitagorica_1/image8.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <center> Tabela de Correlação da La Liga. <br><br> </center> <h4> <b> Serie A </b> </h4> <div style="width: 100%; margin: 0 auto; text-align: center;"> <figure> <picture> <img src="/assets/img/Posts_Images/2025-02-12-post_pitagorica_1/image9.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <center> Tabela de Correlação da Serie A. <br><br> </center> <h4> <b> Ligue One </b> </h4> <div style="width: 100%; margin: 0 auto; text-align: center;"> <figure> <picture> <img src="/assets/img/Posts_Images/2025-02-12-post_pitagorica_1/image10.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <center> Tabela de Correlação da Ligue One. <br><br> </center> Como podemos ver, na liga alemã, espanhola e italiana os valores são um pouco menores, mas a expectativa pitagórica continua tendo um poder preditivo maior que a porcentagem de vitória. Já na liga francesa, apesar do valor abaixo de 50% da correlação entre os resultados do Primeiro Turno com os resultados do Segundo Turno, a expectativa pitagórica continua tendo um valor maior do que a porcentagem de vitória. Por enquanto, está tudo dentro do esperado. O interessante é quando começamos a analisar a liga brasileira. <br><br> <h4> <b> Brasileirão </b> </h4> <div style="width: 100%; margin: 0 auto; text-align: center;"> <figure> <picture> <img src="/assets/img/Posts_Images/2025-02-12-post_pitagorica_1/image11.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <center> Tabela de Correlação do Brasileirão. <br><br> </center> Na liga brasileira, além dos valores do Primeiro Turno terem menos de 30% de correlação com os resultados da segunda metade do campeonato, a porcentagem de vitória tem uma correlação maior que a expectativa pitagórica! É a única das 6 ligas estudadas onde esse fato é observado. <br><br> <h2> <b> Conclusion </b> </h2> A partir do resultado do experimento, decidimos analisar quanto o rendimento difere de um turno para o outro de acordo com a liga para entendermos melhor as ligas mais ‘imprevisíveis’. Para isso, calculamos a média e a mediana dessa variação em todas as ligas estudadas. O Brasileirão se destacou como a competição com a maior oscilação entre turnos, superando as ligas europeias. A surpresa ficou por conta da La Liga, que apresentou uma variação relativamente alta para os padrões europeus. <br><br> </a><table> <thead> <tr> <th>Ligas</th> <th>Mediana da Diferença de Aproveitamento</th> <th>Média da Diferença de Aproveitamento</th> </tr> </thead> <tbody> <tr> <td>Premier League</td> <td>20.78%</td> <td>27.13%</td> </tr> <tr> <td>La Liga</td> <td>21.64%</td> <td>36.83%</td> </tr> <tr> <td>Ligue 1</td> <td>23.25%</td> <td>32.35%</td> </tr> <tr> <td>Série A</td> <td>18.61%</td> <td>27.39%</td> </tr> <tr> <td>Bundesliga</td> <td>21.30%</td> <td>26.35%</td> </tr> <tr> <td>Brasileirão</td> <td>32.14%</td> <td>38.76%</td> </tr> </tbody> </table> <br><br> <h4>Cálculo da diferença de aproveitamento:</h4> \[ \left( \frac{\text{Aproveitamento 2° Turno}}{\text{Aproveitamento 1° Turno}} - 1 \right) \times 100\% \] <div style="width: 100%; margin: 0 auto; text-align: center;"> <figure> <picture> <img src="/assets/img/Posts_Images/2025-02-12-post_pitagorica_1/image12.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <center> Variação entre os aproveitamentos dos clubes brasileiros no Primeiro Turno e no Segundo Turno do Brasileirão. <br><br> </center> O gráfico acima mostra a alta variação entre os aproveitamentos dos clubes brasileiros no Primeiro Turno e no Segundo Turno do Brasileirão. Clubes como Vitória, Grêmio, Fluminense e Corinthians tiveram péssimos resultados na primeira metade do campeonato, mas tiveram valores acima da média na segunda metade, enquanto clubes como Atlético Mineiro, Cruzeiro e Bahia foram bem no Primeiro Turno e pioraram no Segundo. Por que será que isso acontece? <br><br> Podemos supor alguns motivos, como aumento do investimento com o passar do tempo, a constante troca de técnicos ou a pressão da torcida após resultados ruins, forçando diretorias a investir mais em reforços; mas o motivo real necessitaria de uma pesquisa mais aprofundada sobre o tema. <br><br> No próximo post, abordaremos a previsão de resultados com base no valor de mercado dos clubes, que será nossa variável principal. Fique atento às nossas redes sociais para não perder nenhuma novidade do blog! <br><br> <div> </div> </div> </div> </article> </div> </div> <footer class="fixed-bottom"> <div class="container mt-0"> © Copyright 2025 ACE Laboratory. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?7b30caa5023af4af8408a472dc4e1ebb"></script> <script defer src="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.js"></script> <script src="/assets/js/no_defer.js?d633890033921b33e0ceb13d22340a9c"></script> <script defer src="/assets/js/common.js?acdb9690d7641b2f8d40529018c71a01"></script> <script defer src="/assets/js/copy_code.js?9b43d6e67ddc7c0855b1478ee4c48c2d" type="text/javascript"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script async src="https://www.googletagmanager.com/gtag/js?id=G-TN7TBYJLBY"></script> <script>function gtag(){window.dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-TN7TBYJLBY");</script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>