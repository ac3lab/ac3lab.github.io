<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Predicting Match Results in Football - Part 2 | ACE Laboratory </title> <meta name="author" content="ACE Laboratory"> <meta name="description" content="Marrying academic rigor with practical applications to benefit sports "> <meta name="keywords" content="soccer, futebol, data-science, ufrj, ace"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" href="/assets/css/scholar-icons.css?62b2ac103a88034e6882a5be5f3e2772"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%9B%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://ac3lab.github.io/blog/2025/post-value-market_2_ing/"> <script src="/assets/js/theme.js?9190cd960c1fe52d4362ac1570d054ba"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>
    initTheme();
  </script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">ACE</span> Laboratory </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">About </a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">Blog </a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">Publications </a> </li> <li class="nav-item "> <a class="nav-link" href="/profile/">Research Team </a> </li> <li class="nav-item dropdown "> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">SAFE 2025 </a> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown"> <a class="dropdown-item " href="/safe2025/sobre/">Sobre o Evento</a> <a class="dropdown-item " href="/safe2025/patrocinio-safe2025/">Planos de Patrocínio</a> </div> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">Pesquisar <i class="ti ti-search"></i></span> </button> </li> <li class="toggle-container"> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">Predicting Match Results in Football - Part 2</h1> <p class="post-meta"> Created on April 15, 2025 by Ace Laboratory Football Team - Lucas Calmon, Pedro Carvalho </p> <p class="post-tags"> <a href="/blog/2025"> <i class="fa-solid fa-calendar fa-sm"></i> 2025 </a>   ·   <a href="/blog/tag/football"> <i class="fa-solid fa-hashtag fa-sm"></i> Football;</a>   <a href="/blog/tag/analysis"> <i class="fa-solid fa-hashtag fa-sm"></i> Analysis</a>   ·   <a href="/blog/category/football"> <i class="fa-solid fa-tag fa-sm"></i> Football;</a>   <a href="/blog/category/analysis"> <i class="fa-solid fa-tag fa-sm"></i> Analysis</a> </p> </header> <article class="post-content"> <div id="markdown-content"> <p align="justify"> Se quiser ler este texto em pt-br, <a href="https://ac3lab.github.io/blog/2025/post-value_market_2_pt/"> clique aqui.</a> </p> <h2> <b> Introduction </b> </h2> <div style="text-align: justify"> In this post, we will present another method for predicting victory. This time, we will use the market value of the teams as the main variable, which corresponds to the sum of the individual market values of all players on the team. We will explore how this metric can influence the performance of clubs and their chances of winning a match. </div> <h3> <b> Context </b> </h3> <div style="text-align: justify"> Money plays a significant role in modern football. With the transfer market becoming increasingly inflated, it is necessary to spend more money in the transfer windows to maintain competitiveness in the top leagues. The professionalization of the sport has also had a great influence on increasing the cost of maintaining a team, as more expenses are now needed for infrastructure and creating a quality environment to stay ahead of the competition. In fact, studies in the Premier League and Championship (2011-2020) have shown a correlation between a team's payroll and the position the team achieves in the table (Soccernomics, Simon Kuper and Stefan Szymanski). Money drives football. Therefore, we will use the market value of the clubs in the Brazilian league to try to predict the final result of the matches. <div style="width: 100%; margin: 0 auto; text-align: center;"> <figure> <picture> <img src="/assets/img/Posts_Images/2025-04-15-post-value-market-2/img1.jpeg" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <h3> <b> Method </b> </h3> <h4><b>Data</b></h4> <div style="text-align: justify"> We will use data from the 2023 season. <b></b> The dataset has two main parts: <ul> <br> <li>The match data: information such as the home team, away team, result, match date, and odds for victory (home, draw, away), extracted from the <a href="https://football-data.co.uk/" rel="external nofollow noopener" target="_blank">Football-data</a> website and the Pinnacle betting house.</li> <li>The market value of the teams in the Brazilian league 2023, sourced from <a href="https://www.transfermarkt.com.br" rel="external nofollow noopener" target="_blank">Transfermarkt</a>.</li> </ul> Let’s take a look at our match dataset. It has about 19 fields, but only the following are relevant to us: <div style="width: 80%; margin: 0 auto; text-align: center;"> <figure> <picture> <img src="/assets/img/Posts_Images/2025-04-15-post-value-market-2/img2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <b>Legend:</b> home: Home team; away: Away team; res: Match result; oddHome: Home team's chance of victory; oddDraw: Chance of a draw; oddAway: Away team's chance of victory. <br><br> We will transform the odds into probabilities. To do this, we don't simply use the formula (1/odds), because the sum of the probabilities would exceed 1. This excess represents the bookmaker's margin, so we normalize the probabilities to correct it. <div style="width: 80%; margin: 0 auto; text-align: center;"> <figure> <picture> <img src="/assets/img/Posts_Images/2025-04-15-post-value-market-2/img3.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> Now let's take a look at the market value data: <div style="width: 50%; margin: 0 auto; text-align: center;"> <figure> <picture> <img src="/assets/img/Posts_Images/2025-04-15-post-value-market-2/img4.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div style="text-align: justify"> The column <code>TFM_Value</code> contains the market value in millions of euros. For example, Palmeiras' market value is 138.4 million euros. These values represent the market values of the clubs as of July 20, 2024. <b></b> We have merged the two datasets, adding the market value columns for the home team (<code>tmH</code>) and the away team (<code>tmA</code>). <div style="width: 100%; margin: 0 auto; text-align: center;"> <figure> <picture> <img src="/assets/img/Posts_Images/2025-04-15-post-value-market-2/img5.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> The variable we will use to predict the results is the ratio between <code>tmH</code> (home team's market value) and <code>tmA</code> (away team's market value). More specifically, the <b>logarithm</b> of this ratio. The reason we use the log is that the distribution of the ratio between <code>tmH</code> and <code>tmA</code> is skewed to the right. Applying the log function makes the distribution symmetrical, which improves performance. The image below helps to visualize this. <div style="width: 80%; margin: 0 auto; text-align: center;"> <figure> <picture> <img src="/assets/img/Posts_Images/2025-04-15-post-value-market-2/img6.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div style="width: 80%; margin: 0 auto; text-align: center;"> <figure> <picture> <img src="/assets/img/Posts_Images/2025-04-15-post-value-market-2/img7.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> So, the <code>logTmRatio</code> will be the variable we will use to predict the results. In other words, our independent variable. <div style="text-align: justify"> We encoded the <code>res</code> column as: <ul> <li>0: Home team victory</li> <li>1: Draw</li> <li>2: Away team victory</li> </ul> This new column will be called <code>winValue</code>. <div style="width: 80%; margin: 0 auto; text-align: center;"> <figure> <picture> <img src="/assets/img/Posts_Images/2025-04-15-post-value-market-2/img8.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <h3><b>Model</b></h3> <div style="text-align: justify"> We will use an <b>Ordinal Logistic Regression</b> model, which is a technique used to model the relationship between an ordinal response variable (i.e., categories with order) and one or more predictor variables. In our case, the ordinal response variable is <code>winValue</code> and the predictor variable will be <code>logTmRatio</code>. The model involves determining the \( \alpha_1 \), which is the point that separates the home team victory from the draw or away team victory. In other words, if a point falls before \( \alpha_1 \), the model will predict a home team victory, and if it falls after \( \alpha_1 \), it will predict a draw or away team victory. The \( \alpha_2 \) is the point that separates the draw from the away team victory. The \( \beta \) indicates how the predictor variable, in our case the market value ratio, influences the result. For better visualization of this explanation, observe the graph below, where \( \alpha_1 \) is represented by \( \theta_1 \): <div style="width: 80%; margin: 0 auto; text-align: center;"> <figure> <picture> <img src="/assets/img/Posts_Images/2025-04-15-post-value-market-2/img9.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> We used an Ordinal Logistic Regression model, which relates an ordinal response variable (<code>winValue</code>) to a continuous predictor (<code>logTmRatio</code>). The model finds two cutoff points: <ul> <li> <b>\( \alpha_1 \)</b>: separates home team victory from draw or away team victory</li> <li> <b>\( \alpha_2 \)</b>: separates draw from away team victory</li> <li> <b>\( \beta \)</b>: tells us how this ratio influences the result of The coefficient of <code>logTmRatio</code> </li> </ul> Now that we understand the model, let's prepare its training. The training dataset consists of the first 200 games of the season, and the remaining 180 games will be used as the test dataset. <div style="width: 80%; margin: 0 auto; text-align: center;"> <figure> <picture> <img src="/assets/img/Posts_Images/2025-04-15-post-value-market-2/img10.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <b>Model coefficients:</b><br> \(\beta \): -0.6309<br> \( \alpha_1 \): -0.1519<br> \( \alpha_2 \): 0.0533 </div> <h4><b>Probability Calculation</b></h4> <div style="text-align: justify"> From these coefficients, we calculate: <ul> <li> <b>Ph (home team victory)</b>: \( \frac{1}{1 + e^{-( \alpha_1 - βx)}} \)</li> <li> <b>Pd (draw)</b>: \( \frac{1}{1 + e^{-( \alpha_2 - βx)}} - Ph \)</li> <li> <b>Pv (away team victory)</b>: \( 1 - Ph - Pd \)</li> </ul> <div style="width: 100%; margin: 0 auto; text-align: center;"> <figure> <picture> <img src="/assets/img/Posts_Images/2025-04-15-post-value-market-2/img11.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> Let's add columns to compare the prediction results from Pinnacle and what we found. <div style="width: 100%; margin: 0 auto; text-align: center;"> <figure> <picture> <img src="/assets/img/Posts_Images/2025-04-15-post-value-market-2/img12.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <h3> <b> Evaluation </b> </h3> <div style="text-align: justify"> Remember that we used the first 200 games to train our model, so we will compare the prediction results from our test set. <div style="width: 100%; margin: 0 auto; text-align: center;"> <figure> <picture> <img src="/assets/img/Posts_Images/2025-04-15-post-value-market-2/img13.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> The most important value for us is highlighted: the average accuracy of results from both the bookmaker and our model. Notice that they are close, and even the bookmaker had less than 50% accuracy. One important thing to consider when analyzing these data is the size of the training set, which only had 200 matches, and we achieved a result of a 0.03 difference from the bookmaker. Let’s create two cross tables to better understand in which types of games our model is most likely to make errors and succeed. <div style="width: 40%; margin: 0 auto; text-align: center;"> <figure> <picture> <img src="/assets/img/Posts_Images/2025-04-15-post-value-market-2/img14.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> Notice that in the draw column, our model did not predict draws, which is due to the fact that the market value ratio between two teams has a very low probability of resulting in a draw, since it is expected that the market values of the teams would need to be close to each other. <div style="width: 40%; margin: 0 auto; text-align: center;"> <figure> <picture> <img src="/assets/img/Posts_Images/2025-04-15-post-value-market-2/img15.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> The numbers are quite scattered, but we can see that our model performs better than Pinnacle in predicting away team victories, while Pinnacle has most of its correct predictions in home team victories. </div> <h2> <b> Conclusion </b> </h2> <div style="text-align: justify"> In the next post, we will discuss the prediction of results based on the Poisson distribution, a well-known distribution used to predict rare events. Stay tuned to our social media to not miss any updates from the blog! </div> </div> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2025/real_psg_en/">Real Madrid vs PSG: French Dominance Secures Club World Cup Final Spot</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2025/flu_chelsea_en/">Fluminense vs Chelsea: Brazilian Underdogs' Fairytale Run Ends in Semifinal</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2025/real_borussia_en/">Real Madrid vs Borussia Dortmund: A Champions League Rematch on the World Stage</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2025/chelsea_palmeiras_en/">Heartbreak and Heroics: Palmeiras Faces Chelsea in a Quarterfinal Thriller</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2025/alhilal_flu_en/">Fluminense vs Al Hilal: Brazilian Resilience Meets Saudi Power in Quarterfinal Showdown</a> </li> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2025 ACE Laboratory. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js?a0db7e5d5c70cc3252b3138b0c91dcaf" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?c8a01c11a92744d44b093fc3bda915df" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script src="/assets/js/mathjax-setup.js?a5bb4e6a542c546dd929b24b8b236dfd"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script async src="https://www.googletagmanager.com/gtag/js?id=G-TN7TBYJLBY"></script> <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() {
      dataLayer.push(arguments);
    }
    gtag('js', new Date());

    gtag('config', 'G-TN7TBYJLBY');
  </script> <script defer src="/assets/js/google-analytics-setup.js"></script> <script defer src="/assets/js/progress-bar.js?2f30e0e6801ea8f5036fa66e1ab0a71a" type="text/javascript"></script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>
    addBackToTop();
  </script> <script type="module" src="/assets/js/search/ninja-keys.min.js?a3446f084dcaecc5f75aa1757d087dcf"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script src="/assets/js/search-setup.js?6c304f7b1992d4b60f7a07956e52f04a"></script> <script src="/assets/js/search-data.js"></script> <script src="/assets/js/shortcut-key.js?6f508d74becd347268a7f822bca7309d"></script> </body> </html>