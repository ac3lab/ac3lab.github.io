<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>Predicting Match Results in Football - Part 1 | ACE Laboratory</title> <meta name="author" content="ACE Laboratory"> <meta name="description" content="Marrying academic rigor with practical applications to benefit sports "> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.css"> <link rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?19f3075a2d19613090fe9e16b564e1fe" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%9B%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://ac3lab.github.io/blog/2025/post_pitagorica_1_en/"> <script async src="https://www.googletagmanager.com/gtag/js?id=G-TN7TBYJLBY"></script> <script>function gtag(){window.dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-TN7TBYJLBY");</script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span><img src="/assets/img/ACE_Logo.jpg" width="40" height="40" class="circular-cut">  </span><span class="font-weight-bold">ACE </span>Laboratory</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">About</a> </li> <li class="nav-item "> <a class="nav-link" href="/blog/">Blog</a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">Publications</a> </li> <li class="nav-item "> <a class="nav-link" href="/profile/">Research Team</a> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5"> <div class="post"> <header class="post-header"> <h1 class="post-title">Predicting Match Results in Football - Part 1</h1> <p class="post-meta">February 12, 2025• Ace Laboratory Football Team - Lucas Calmon, Pedro Carvalho</p> <p class="post-tags"> <a href="/blog/2025"> <i class="fa-solid fa-calendar fa-sm"></i> 2025 </a>   ·   <a href="/blog/tag/football"> <i class="fa-solid fa-hashtag fa-sm"></i> Football;</a>   <a href="/blog/tag/analysis"> <i class="fa-solid fa-hashtag fa-sm"></i> Analysis</a>     ·   <a href="/blog/category/football"> <i class="fa-solid fa-tag fa-sm"></i> Football;</a>   <a href="/blog/category/analysis"> <i class="fa-solid fa-tag fa-sm"></i> Analysis</a>   </p> </header> <article class="post-content"> <div id="markdown-content"> <hr> <p align="justify"> Se quiser ler este texto em pt-br, <a href="https://ac3lab.github.io/blog/2000/post_pitagorica_1_pt/"> clique aqui.</a> </p> <h2> <b> Introduction </b> </h2> <div style="text-align: justify"> In this series of posts, we will explore some methods to predict football clubs' winning percentage. In this first post, we will discuss two statistics: the winning percentage and a variation of it called the Pythagorean expectation. The data used will be from the latest seasons of major European leagues (23-24) and the Brazilian league (24), extracted from the FBREF website. <br><br> <h3> <b> What is the Pythagorean Expectation? </b> </h3> The Pythagorean expectation is an analytical formula initially used in baseball. It was created by Bill James, a renowned statistician and pioneer in sports data analysis, who wrote dozens of books studying baseball through statistics to determine why teams win or lose. This formula aims to estimate the percentage of games a team should have won based on the number of runs they scored and allowed. In football, the equivalent would be goals scored and goals conceded. <br><br> <div style="width: 100%; margin: 0 auto; text-align: center;"> <figure> <picture> <img src="/assets/img/Posts_Images/2025-02-12-post_pitagorica_1/image1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <center>The name of the statistic comes from the similarity of its formula to the Pythagorean theorem. <br><br> </center> Comparing a team's winning percentage with its Pythagorean expectation can help evaluate which teams are performing above expectations and which are underperforming. <br><br> <h3> <b> The Research </b> </h3> The data used consists of a table with all match results from each league's season, collected from <a href="https://fbref.com/pt/comps/24/cronograma/Serie-A-Resultados-e-Calendarios" rel="external nofollow noopener" target="_blank">FBREF</a>. <br><br> <h3> <b> Data Preparation and Defining Percentages </b> </h3> After extracting the data and performing basic table cleaning, the result is a DataFrame in the following format. A season consists of 380 matches, and to calculate the winning percentage and the Pythagorean expectation, we need the following information: the match result determines the team's winning percentage, while goals scored and conceded define the Pythagorean expectation. <br><br> <div style="width: 100%; margin: 0 auto; text-align: center;"> <figure> <picture> <img src="/assets/img/Posts_Images/2025-02-12-post_pitagorica_1/image2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <center>This is the way the data is extracted from FBREF. <br><br> </center> We separated each team's goals and determined the winner of each match. This allows us to calculate the winning percentage—where a win is worth 1, a draw is worth 0.5, and a loss is worth 0. The sum of these values is then divided by the number of games played (<a href="https://en.wikipedia.org/wiki/Winning_percentage" rel="external nofollow noopener" target="_blank">Wikipedia</a>). <br><br> After adjusting the table and calculating the teams' winning percentages, we split the data into the First Half and Second Half of the season, meaning before and after matchday 20. The table for the First Half of the season looks like this: <br><br> <div style="width: 100%; margin: 0 auto; text-align: center;"> <figure> <picture> <img src="/assets/img/Posts_Images/2025-02-12-post_pitagorica_1/image3.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <center> G: Number of matches played; W: Win value, used for calculating the winning percentage; GF: Goals scored; GA: Goals conceded; wpc: Winning percentage <br><br> </center> To finalize our table, we calculate the Pythagorean expectation and merge the First and Second Half tables according to each team. <br><br> <div style="width: 100%; margin: 0 auto; text-align: center;"> <figure> <picture> <img src="/assets/img/Posts_Images/2025-02-12-post_pitagorica_1/image4.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <center> Values with <b>x</b> refer to the First Half, and values with <b>y</b> refer to the Second Half. <br><br> </center> Code for Calculating wpc and pyth: <br> <br> <figure class="highlight"><pre><code class="language-python" data-lang="python"><table class="rouge-table"><tbody><tr>
<td class="gutter gl"><pre class="lineno">1
2
</pre></td> <td class="code"><pre><span class="n">PrimeiroTurno</span><span class="p">[</span><span class="sh">'</span><span class="s">win_percentage</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">PrimeiroTurno</span><span class="p">[</span><span class="sh">'</span><span class="s">W</span><span class="sh">'</span><span class="p">]</span> <span class="o">/</span> <span class="n">PrimeiroTurno</span><span class="p">[</span><span class="sh">'</span><span class="s">G</span><span class="sh">'</span><span class="p">]</span>  <span class="c1"># win percentage - (Win Value) / (Games Played)
</span><span class="n">PrimeiroTurno</span><span class="p">[</span><span class="sh">'</span><span class="s">pythagorean</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">PrimeiroTurno</span><span class="p">[</span><span class="sh">'</span><span class="s">GF</span><span class="sh">'</span><span class="p">]</span><span class="o">**</span><span class="mi">2</span> <span class="o">/</span> <span class="p">(</span><span class="n">PrimeiroTurno</span><span class="p">[</span><span class="sh">'</span><span class="s">GF</span><span class="sh">'</span><span class="p">]</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">PrimeiroTurno</span><span class="p">[</span><span class="sh">'</span><span class="s">GA</span><span class="sh">'</span><span class="p">]</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>  <span class="c1"># pythagorean expectation - (Goals For)^2 / ((Goals For)^2 + (Goals Against)^2)</span>
</pre></td> </tr></tbody></table></code></pre></figure> <br><br> <h3> <b> Discussing Regression Graphs and Correlation </b> </h3> As seen in the image below, the Pythagorean expectation in the first half of the Premier League is strongly related to the winning percentage, as expected. <br><br> <div style="width: 100%; margin: 0 auto; text-align: center;"> <figure> <picture> <img src="/assets/img/Posts_Images/2025-02-12-post_pitagorica_1/image5.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <center> The relationship between <b>pythagorean_x</b> and <b>win_percentage_x</b> in the First Half is represented in the graph. The line represents a linear regression fitted to the data, showing the relationship between the two variables. <br><br> </center> But what we really want to know is: which of these statistics has a stronger relationship with a team’s winning percentage at the end of the season? To analyze this, we can generate a correlation table comparing these statistics between the First Half and Second Half of the season. <br><br> <div style="width: 100%; margin: 0 auto; text-align: center;"> <figure> <picture> <img src="/assets/img/Posts_Images/2025-02-12-post_pitagorica_1/image6.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <center> Premier League correlation table. <br><br> </center> As seen in the highlighted values, <b>pythagorean_x</b> has a stronger correlation with <b>win_percentage_y</b> (0.80) than <b>win_percentage_x</b> with <b>win_percentage_y</b> (0.75). While this difference is small, it suggests that the Pythagorean expectation has slightly better predictive power than the winning percentage. This is the result for the Premier League. What about other leagues? <br><br> <h4> <b> Bundesliga </b> </h4> <div style="width: 100%; margin: 0 auto; text-align: center;"> <figure> <picture> <img src="/assets/img/Posts_Images/2025-02-12-post_pitagorica_1/image7.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <center> Bundesliga correlation table. <br><br> </center> <h4> <b> La Liga </b> </h4> <div style="width: 100%; margin: 0 auto; text-align: center;"> <figure> <picture> <img src="/assets/img/Posts_Images/2025-02-12-post_pitagorica_1/image8.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <center> La Liga correlation table. <br><br> </center> <h4> <b> Serie A </b> </h4> <div style="width: 100%; margin: 0 auto; text-align: center;"> <figure> <picture> <img src="/assets/img/Posts_Images/2025-02-12-post_pitagorica_1/image9.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <center> Serie A correlation table. <br><br> </center> <h4> <b> Ligue One </b> </h4> <div style="width: 100%; margin: 0 auto; text-align: center;"> <figure> <picture> <img src="/assets/img/Posts_Images/2025-02-12-post_pitagorica_1/image10.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <center> Ligue One correlation table. <br><br> </center> As observed, in the German, Spanish, and Italian leagues, the values are slightly lower, but the Pythagorean expectation still has better predictive power than the winning percentage. In the French league, despite the correlation between First Half and Second Half results being below 50%, the Pythagorean expectation still outperforms the winning percentage. So far, everything aligns with expectations. However, things get interesting when we analyze the Brazilian league. <br><br> <h4> <b> Brasileirão </b> </h4> <div style="width: 100%; margin: 0 auto; text-align: center;"> <figure> <picture> <img src="/assets/img/Posts_Images/2025-02-12-post_pitagorica_1/image11.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <center> Brasileirão correlation table. <br><br> </center> In the Brazilian league, not only do First Half values have less than 30% correlation with Second Half results, but the winning percentage also has a <b>higher correlation</b> than the Pythagorean expectation! This is the only one of the six leagues studied where this phenomenon occurs. <br><br> <h2> <b> Conclusion </b> </h2> Based on the experiment’s results, we decided to analyze how much team performance fluctuates between the two halves of the season, depending on the league, to better understand the most ‘unpredictable’ leagues. To do this, we calculated the mean and median of this variation across all studied leagues. The <b>Brasileirão stood out as the competition with the highest fluctuation between halves</b>, surpassing European leagues. Surprisingly, La Liga showed a relatively high variation for European standards. <br><br> <table> <thead> <tr> <th style="color: white;">Leagues</th> <th style="color: white;">Median Performance Difference</th> <th style="color: white;">Mean Performance Difference</th> </tr> </thead> <tbody> <tr> <td style="color: white;">Premier League</td> <td style="color: white;">20.78%</td> <td style="color: white;">27.13%</td> </tr> <tr> <td style="color: white;">La Liga</td> <td style="color: white;">21.64%</td> <td style="color: white;">36.83%</td> </tr> <tr> <td style="color: white;">Ligue 1</td> <td style="color: white;">23.25%</td> <td style="color: white;">32.35%</td> </tr> <tr> <td style="color: white;">Série A</td> <td style="color: white;">18.61%</td> <td style="color: white;">27.39%</td> </tr> <tr> <td style="color: white;">Bundesliga</td> <td style="color: white;">21.30%</td> <td style="color: white;">26.35%</td> </tr> <tr> <td style="color: white;">Brasileirão</td> <td style="color: white;">32.14%</td> <td style="color: white;">38.76%</td> </tr> </tbody> </table> <br><br> <h4>Performance Difference Calculation:</h4> \[ \left( \frac{\text{Second Half Performance}}{\text{First Half Performance}} - 1 \right) \times 100\% \] <div style="width: 100%; margin: 0 auto; text-align: center;"> <figure> <picture> <img src="/assets/img/Posts_Images/2025-02-12-post_pitagorica_1/image12.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <center> variation in Brazilian clubs’ performances between the First and Second Halves of the Brasileirão. <br><br> </center> The graph above illustrates the high variation in Brazilian clubs’ performances between the First and Second Halves of the Brasileirão. Teams like Vitória, Grêmio, Fluminense, and Corinthians had poor results in the first half but above-average performances in the second half. Meanwhile, Atlético Mineiro, Cruzeiro, and Bahia performed well in the first half but declined in the second. Why does this happen? <br><br> We can speculate on some possible reasons, such as increased investment over time, frequent coaching changes, or fan pressure after poor results, which forces club management to invest more in reinforcements. However, determining the real cause would require a more in-depth study on the subject. <br><br> In the next post, we will discuss predicting outcomes based on the clubs' market value, which will be our primary variable. Stay tuned to our social media channels so you don't miss any updates from the blog! <br> <br> <div> </div> </div> </div> </article> </div> </div> <footer class="fixed-bottom"> <div class="container mt-0"> © Copyright 2025 ACE Laboratory. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?7b30caa5023af4af8408a472dc4e1ebb"></script> <script defer src="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.js"></script> <script src="/assets/js/no_defer.js?d633890033921b33e0ceb13d22340a9c"></script> <script defer src="/assets/js/common.js?acdb9690d7641b2f8d40529018c71a01"></script> <script defer src="/assets/js/copy_code.js?9b43d6e67ddc7c0855b1478ee4c48c2d" type="text/javascript"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script async src="https://www.googletagmanager.com/gtag/js?id=G-TN7TBYJLBY"></script> <script>function gtag(){window.dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-TN7TBYJLBY");</script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>